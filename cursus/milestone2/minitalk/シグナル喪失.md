
## シグナル喪失
シグナルハンドラ実行中に新たなシグナルAを受け取ると、Aのハンドラが割り込んで実行される。しかし、Aがマスク対象だった場合、割り込みは発生せず、シグナルは失われる。
これをシグナル喪失という。

## マスク
マスクの対象となるのは2つ
- ハンドラを起動したものと同種のシグナル
- マスク対象に設定したシグナル

## minitalkで起こるデッドロック
サーバにおきたこと
前提：ハンドラ内でシグナル受信から文字出力まですべての処理を完結させている。
1. クライアントAのシグナル処理中にクライアントBからシグナルを送信した。
2. Aとの通信の合間に、Bからのシグナルを受け取ってしまう。
3. Bのシグナル処理中にAのシグナルが到着。ハンドラ実行中のためシグナル喪失。
4. Aはack待ちの無限ループ。
5. サーバーはAと通信中なので、Bにserver_state=BUSYのシグナルを送信する。Aからのシグナルを待つ。
6. [3.] によりAからシグナルが届くことはないので、サーバーはいかなる通信に対してもserver_state=BUSYのシグナルを送信することしかできない。デッドロックに陥る。

## 解決策
2つの解決策が考えられる。
1. ハンドラの処理短縮。
writeには時間がかかるため、ハンドラ外で行う。writeの途中に割り込まれても、文字化けは1文字で済むはず。
2. マスクをせず割り込みを許容
ハンドラは最小限にとどめて、メイン関数内で文字を出力。
